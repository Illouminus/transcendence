FROM node:18

WORKDIR /app

COPY package*.json ./

ARG VITE_API_URL
ARG VITE_AUTH_URL
ARG VITE_BASE_URL
ARG VITE_WS_BASE
ARG VITE_WS_GAME_PORT
ARG VITE_WS_CHAT_PORT
ARG VITE_WS_USER_PORT

ENV VITE_API_URL=$VITE_API_URL
ENV VITE_AUTH_URL=$VITE_AUTH_URL
ENV VITE_BASE_URL=$VITE_BASE_URL
ENV VITE_WS_BASE=$VITE_WS_BASE
ENV VITE_WS_GAME_PORT=$VITE_WS_GAME_PORT
ENV VITE_WS_CHAT_PORT=$VITE_WS_CHAT_PORT
ENV VITE_WS_USER_PORT=$VITE_WS_USER_PORT

RUN npm install

COPY . .

EXPOSE 3000

CMD ["npm", "run", "dev"]